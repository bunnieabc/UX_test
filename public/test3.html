<!DOCTYPE html>
<html xmlns:og='http://ogp.me/ns#'>
<head>
<title>UX test</title>
  <meta charset="UTF-8">
  <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
  <title></title>
  <meta content="" name="keywords">
  <meta content="" name="description">
  <meta content="" property="og:title">
  <meta content="" property="og:site_name">
  <meta content="/img/common/FacebookShare.jpg" property="og:image">
  <meta content="" property="og:description">
  
  
  <link rel="stylesheet" href="/assets/css/index.css">
<link href="https://fonts.googleapis.com/css?family=Frank+Ruhl+Libre|Montserrat|Raleway" rel="stylesheet">
</head>
<div class="wrap2">
  
  <video id="vid" controls>
    <source  src="https://s3.us-east-2.amazonaws.com/uxproject/1.mp4" type="video/mp4" >
    Your browser does not support the video tag.
  </video>
  <audio id="intro" controls>
    <source src="https://s3.us-east-2.amazonaws.com/uxproject/clip/1.mp3" type="audio/mpeg">
  Your browser does not support the audio element.
  </audio>
  <audio id="mid" controls>
    <source src="https://s3.us-east-2.amazonaws.com/uxproject/music/4.mp3" type="audio/mpeg">
  Your browser does not support the audio element.
  </audio>
  <audio id="q1" controls>
    <source src="https://s3.us-east-2.amazonaws.com/uxproject/clip/q1.mp3" type="audio/mpeg">
  Your browser does not support the audio element.
  </audio>

  <audio id="q2" controls>
    <source src="https://s3.us-east-2.amazonaws.com/uxproject/clip/q2.mp3" type="audio/mpeg">
  Your browser does not support the audio element.
  </audio>

  <audio id="q3" controls>
    <source src="https://s3.us-east-2.amazonaws.com/uxproject/clip/q3.mp3" type="audio/mpeg">
  Your browser does not support the audio element.
  </audio>

  <audio id="end" controls>
    <source src="https://s3.us-east-2.amazonaws.com/uxproject/clip/end.mp3" type="audio/mpeg">
  Your browser does not support the audio element.
  </audio>

  <div class="control-row">
    <button class ="control" id="start">Start</button>
    <button class ="control" id="continue">Continue</button>
    <button class ="control" id="pause">Pause</button>
    <button class ="vol" id="voldown"><-</button>
    <button class ="vol" id ="volup">-></button>
  </div>
  <div class="question-block">
    <div class="question">
      <div class="ques-in">
        Would you like to hear about my early life?
        <div class="button-row">
          <button class="b1" id ="yes1">Sure!</button>
          <button class="b1" id ="no1">No, thank you.</button>
        </div>
      </div>
      <div class="ques-in">
        Would you like to hear about my early life?
        <div class="button-row">
          <button class="b1" id ="yes1">Sure!</button>
          <button class="b1" id ="no1">No, thank you.</button>
        </div>
      </div>
    </div>
  </div>

  <div class="question-block2">
    <div class="question">
      <div class="ques-in">
        Would you like to hear about my initial involvement with the anti-slavery movement?
        <div class="button-row">
          <button class="b1 yes" id ="yes2">Sure!</button>
          <button class="b1 no" id ="no2">No, thank you.</button>
        </div>
      </div>
      <div class="ques-in">
        Would you like to hear about my initial involvement with the anti-slavery movement?
        <div class="button-row">
          <button class="b1 yes" id ="yes2">Sure!</button>
          <button class="b1 no" id ="no2">No, thank you.</button>
        </div>
      </div>
    </div>
  </div>

  <div class="question-block3">
    <div class="question">
      <div class="ques-in">
       Would you like to hear about the Vigilance Committee and the Underground Railroad?
        <div class="button-row">
          <button class="b1 yes" id ="yes3">Sure!</button>
          <button class="b1 no" id ="no3">No, thank you.</button>
        </div>
      </div>
      <div class="ques-in">
       Would you like to hear about the Vigilance Committee and the Underground Railroad?
        <div class="button-row">
          <button class="b1 yes" id ="yes3">Sure!</button>
          <button class="b1 no" id ="no3">No, thank you.</button>
        </div>
      </div>
    </div>
  </div>

  <div class="end-block">
    <div class="question">
      <div class="ques-in">
       Thank you for visiting 227 Duffield St Museum!
      </div>
      <div class="ques-in">
         Thank you for visiting 227 Duffield St Museum!
      </div>
    </div>
  </div>
</div>


<script src="/assets/js/jquery-2.1.4.min.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/annyang/2.6.0/annyang.min.js"></script>
<script>
var vid = document.getElementById("vid");
//var level = 50;
var count = 0;
var intro_end = 0;
// volume and pause, start control
var intro = document.getElementById("intro");
$("#start").click(function(){
  intro.play();
  intro.volume = 1;
  toggleFullScreen();
  $("#start").click(false);
  $("#start").css("opacity","0.3");
})

$("#continue").click(function(){
  
  if(intro_end == 0)intro.play();
  else vid.play();
  toggleFullScreen();
})

$("#pause").click(function(){
  intro.pause();
  //intro.volume = 1;
  vid.pause();
})

$("#voldown").click(function(){
  if(intro.volume >= 0.3){
    intro.volume = intro.volume - 0.3;
    $("#volup").html("->")
  }
  else{
    $("#voldown").html("mute")
    $("#volup").html("->")
  }

  if(vid.volume >= 0.3){
    vid.volume = intro.volume - 0.3;
    $("#volup").html("->")
  }
  else{
    $("#voldown").html("mute")
    $("#volup").html("->")
  }
})

$("#volup").click(function(){
  if(intro.volume <= 0.7){
    intro.volume = intro.volume + 0.3;
    $("#voldown").html("<-")
  }
  else{
    $("#volup").html("max")
    $("#voldown").html("<-")
  }

  if(vid.volume <= 0.7){
    vid.volume = intro.volume + 0.3;
    $("#voldown").html("<-")
  }
  else{
    $("#volup").html("max")
    $("#voldown").html("<-")
  }
})



function toggleFullScreen() {
  if (vid.requestFullscreen) {
    vid.requestFullscreen();
  } else if (vid.msRequestFullscreen) {
    vid.msRequestFullscreen();
  } else if (vid.mozRequestFullScreen) {
    vid.mozRequestFullScreen();
  } else if (vid.webkitRequestFullscreen) {
    vid.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT);
  }
}

// usage-intro end
// music and introduction show up
// first question show up

$("#intro").on("ended", function() {
  var mid = document.getElementById("mid");
  mid.play();
  mid.volume = 0.3;
  setTimeout(function(){ vid.play(); }, 3000);
  vid.volume = 1;

  // question show up
  //$(".question-block").fadeIn();
  intro_end = 1;
});

// music loop
$("#mid").on("ended", function() {
  
  mid.play();
});

// self-intro end
$("#vid").on("ended", function() {
  if(count == 0){
    var q1 = document.getElementById("q1");
    q1.play();
    // question show up
    $(".question-block").css({"z-index": "2147483647"})
    $(".question-block").fadeIn();
    console.log("?")
  }
  else if(count == 1) {
    var q2 = document.getElementById("q2");
    q2.play();
    // question show up
    $(".question-block2").css({"z-index": "2147483647"})
    $(".question-block2").fadeIn();
  }

  else if(count == 2) {
    var q3 = document.getElementById("q3");
    q3.play();
    // question show up
    $(".question-block3").css({"z-index": "2147483647"})
    $(".question-block3").fadeIn();
  }
  else if(count ==3) {
    var end = document.getElementById("end");
    end.play();
    $(".end-block").css({"z-index": "2147483647"})
    $(".end-block").fadeIn();
  }
  count = count + 1;
});

// select "Yes" -> continue the vid2
$("#yes1").click(function(){
  $(".question-block").css("display","none");
  document.querySelector("#vid > source").src = "https://s3.us-east-2.amazonaws.com/uxproject/2.mp4"
  
  document.getElementById("vid").load();
  document.getElementById("vid").play();
  toggleFullScreen()
  console.log(document.querySelector("#vid > source").src)
})

//select "Yes" -> continue the vid3
$("#yes2").click(function(){
  $(".question-block2").css("display","none");
  document.querySelector("#vid > source").src = "https://s3.us-east-2.amazonaws.com/uxproject/3.mp4"
  
  document.getElementById("vid").load();
  document.getElementById("vid").play();
  toggleFullScreen()
})

//select "Yes" -> continue the vid4
$("#yes3").click(function(){
  $(".question-block3").css("display","none");
  document.querySelector("#vid > source").src = "https://s3.us-east-2.amazonaws.com/uxproject/4.mp4"
  
  document.getElementById("vid").load();
  document.getElementById("vid").play();
  toggleFullScreen()
})

// select "No1" -> to question 2
$("#no1").click(function(){
  $(".question-block").css("display","none");
  var q2 = document.getElementById("q2");
  q2.play();
  // question show up
  $(".question-block2").css({"z-index": "2147483647"})
  $(".question-block2").fadeIn();
  count = count + 1;
})

// select "No2" -> to question 3
$("#no2").click(function(){
  $(".question-block2").css("display","none");
  var q3 = document.getElementById("q3");
  q3.play();
  // question show up
  $(".question-block3").css({"z-index": "2147483647"})
  $(".question-block3").fadeIn();
  count = count + 1;
})

// select "No3" -> to question 4
$("#no3").click(function(){
  $(".question-block3").css("display","none");
  var end = document.getElementById("end");
  end.play();
  // question show up
  $(".end-block").css({"z-index": "2147483647"})
  $(".end-block").fadeIn();
  count = count + 1;
})

if (annyang) {
  // Let's define our first command. First the text we expect, and then the function it should call
  var commands = {
    'yes': function() {
      if(count == 1){
        $('#yes1').click();
      }
      else if(count == 2){
        $('#yes2').click();
      }
      else if(count == 3){
        $('#yes3').click();
      }
      console.log("yes: ", count)
    },
    'ok': function() {
      if(count == 1){
        $('#yes1').click();
      }
      else if(count == 2){
        $('#yes2').click();
      }
      else if(count == 3){
        $('#yes3').click();
      }
      console.log("yes: ", count)
    },
    'sure': function() {
      if(count == 1){
        $('#yes1').click();
      }
      else if(count == 2){
        $('#yes2').click();
      }
      else if(count == 3){
        $('#yes3').click();
      }
      console.log("yes: ", count)
    },
    'no thank you': function() {
     if(count == 1){
        $('#no1').click();
      }
      else if(count == 2){
        $('#no2').click();
      }
      else if(count == 3){
        $('#no3').click();
      }
    }
    ,
    'no way': function() {
     if(count == 1){
        $('#no1').click();
      }
      else if(count == 2){
        $('#no2').click();
      }
      else if(count == 3){
        $('#no3').click();
      }
    },
    'no I dont': function() {
     if(count == 1){
        $('#no1').click();
      }
      else if(count == 2){
        $('#no2').click();
      }
      else if(count == 3){
        $('#no3').click();
      }
    },
    'no thanks': function() {
     if(count == 1){
        $('#no1').click();
      }
      else if(count == 2){
        $('#no2').click();
      }
      else if(count == 3){
        $('#no3').click();
      }
    },
    'pause': function() {
      $("#pause").click()
    },
    'speak softer': function() {
      $("#voldown").click()
      console.log("soft")
    },
    'speak louder': function() {
      $("#volup").click()
      console.log("loud")
    },
    'continue': function() {
      $("#continue").click()
    },
    'start': function() {
      $("#start").click()
    }
  };

  // Add our commands to annyang
  annyang.addCommands(commands);

  // Start listening. You can call this here, or attach this call to an event, button, etc.
  annyang.start();
}

var yes_func = function() {
  $('#greeting').text('Hello!');
}

</script>
</html>